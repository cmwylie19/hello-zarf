kind: ZarfPackageConfig
metadata:
  name: ocirepo-podinfo
  description: |
    A Zarf package that tests Flux OCIRepo
  version: 0.0.1
components:
  - name: flux
    description: Installs the flux CRDs / controllers to use flux-based deployments in the cluster
    required: true
    manifests:
      - name: flux-crds
        namespace: flux
        files:
          - flux-install.yaml
    images:
      - ghcr.io/fluxcd/kustomize-controller:v0.27.1
      - ghcr.io/fluxcd/source-controller:v0.28.0
  - name: podinfo-via-flux-oci
    description: Does a kubectl create -f on the flux manifests
    required: true
    manifests:
      - name: podinfo-via-flux-oci
        namespace: flux-system
        # webserver deployment, svc
        files:
          - zarf-practice.yaml
    # required to tell zarf where your image lives
    images:
      - ghcr.io/stefanprodan/manifests/podinfo

